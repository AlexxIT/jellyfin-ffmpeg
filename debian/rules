#!/usr/bin/make -f

export V=1

CONFIG := --toolchain=hardened \
	--prefix=/usr \
	--arch=$(DEB_HOST_ARCH_CPU) \
	--enable-gpl \
	--disable-ffplay \
	--disable-shared \
	--disable-vdpau \
	--disable-libxcb \
	--disable-sdl2 \
	--disable-xlib \
	--enable-fontconfig \
	--enable-gmp \
	--enable-gnutls \
	--enable-libaom \
	--enable-libass \
	--enable-libdrm \
	--enable-libfreetype \
	--enable-libfribidi \
	--enable-libmp3lame \
	--enable-libopus \
	--enable-libtheora \
	--enable-libvorbis \
	--enable-libwebp \
	--enable-libx264 \
	--enable-libx265 \
	--enable-libzvbi \
	--enable-version3 \
	--enable-static \
	--enable-vaapi \
	--enable-avresample --disable-filter=resample \
	--enable-avisynth \
	--enable-ladspa \
	--enable-libbluray \
	--enable-libbs2b \
	--enable-libcaca \
	--enable-libcdio \
	--enable-libcodec2 \
	--enable-libflite \
	--enable-libfontconfig \
	--enable-libgme \
	--enable-libgsm \
	--enable-libjack \
	--enable-libmysofa \
	--enable-libopenjpeg \
	--enable-libopenmpt \
	--enable-libpulse \
	--enable-librsvg \
	--enable-librubberband \
	--enable-libshine \
	--enable-libsnappy \
	--enable-libsoxr \
	--enable-libspeex \
	--enable-libssh \
	--enable-libtwolame \
	--enable-libvidstab \
	--enable-libvpx \
	--enable-libwavpack \
	--enable-libxml2 \
	--enable-libxvid \
	--enable-libzmq \
	--enable-lv2 \
	--enable-omx \
	--enable-openal \
	--enable-opengl \
	--enable-sdl2 \
	--enable-frei0r \
	--enable-libopencv \

%:
	dh $@

override_dh_auto_configure:
	./configure $(CONFIG)

override_dh_auto_clean:
	dh_auto_clean || true
	git clean -fd

override_dh_auto_install:
	make -j1 install-data DESTDIR=/srv/build/ffmpeg/jellyfin-ffmpeg/debian/jellyfin-ffmpeg AM_UPDATE_INFO_DIR=no 

override_dh_usrlocal:

